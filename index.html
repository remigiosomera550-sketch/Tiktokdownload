<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIVAS - Smart Downloader</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#f8fafc,#e0eafc);min-height:100vh;padding:30px 15px;position:relative;overflow-x:hidden}
        .bg-icons{position:fixed;inset:0;pointer-events:none;opacity:.07}
        .float-icon{position:absolute;animation:float 18s infinite linear;font-size:80px}
        @keyframes float{0%{transform:translateY(100vh) rotate(0deg);opacity:0}10%{opacity:1}90%{opacity:1}100%{transform:translateY(-100px) rotate(360deg);opacity:0}}
        .container{max-width:620px;margin:0 auto;text-align:center;position:relative;z-index:1}
        h1{font-size:2rem;color:#2d3748;font-weight:700}
        .by{font-size:1.5rem;color:#4a5568;margin:10px 0 30px}
        .by span{color:#e53e3e;font-weight:700}
        .big-banner{background:#1e4d3a;color:white;padding:18px;border-radius:25px;font-size:1.3rem;font-weight:700;margin:50px 0 20px;box-shadow:0 15px 30px rgba(30,77,58,.35)}
        .platforms{gap:16px;display:flex;justify-content:center;flex-wrap:wrap;margin:30px 0}
        .badge{padding:12px 28px;border-radius:50px;font-weight:700;font-size:1.1rem;border:3px solid;transition:.3s}
        .badge:hover{transform:translateY(-3px)}
        .yt{color:#ff0000;border-color:#ff0000}
        .tt{color:#00f2ea;border-color:#00f2ea}
        .fb{color:#1877f2;border-color:#1877f2}
        .ig{color:#e1306c;border-color:#e1306c}

        .download-card{background:white;padding:30px;border-radius:30px;box-shadow:0 20px 40px rgba(0,0,0,.12);margin:40px 0;position:relative}
        .input-group{position:relative}
        .url-input{width:100%;padding:20px 60px 20px 25px;border:2px solid #e0e0e0;border-radius:25px;font-size:1.1rem;transition:.3s}
        .url-input:focus{outline:none;border-color:#e53e3e;box-shadow:0 0 0 3px rgba(229,62,62,.1)}
        #platform-icon{position:absolute;right:18px;top:50%;transform:translateY(-50%);font-size:2rem;opacity:0;transition:opacity .4s}
        #downloadBtn{background:#e53e3e;color:white;border:none;width:100%;padding:24px;border-radius:25px;font-size:1.8rem;font-weight:700;cursor:pointer;margin-top:15px;box-shadow:0 12px 25px rgba(229,62,62,.4);transition:.3s}
        #downloadBtn:hover{background:#c53030;transform:translateY(-4px)}
        #downloadBtn:disabled{opacity:.6;cursor:not-allowed}
        .status-msg{padding:15px;border-radius:12px;margin:15px 0;font-weight:600;display:none;align-items:center;gap:10px}
        .status-msg.show{display:flex}
        .status-msg.loading{background:#e3f2fd;color:#1976d2}
        .status-msg.success{background:#e8f5e9;color:#388e3c}
        .status-msg.error{background:#ffebee;color:#c62828}
        .spinner{width:20px;height:20px;border:3px solid rgba(25,118,210,.3);border-top-color:#1976d2;border-radius:50%;animation:spin .8s linear infinite}
        @keyframes spin{to{transform:rotate(360deg)}}
        #preview{width:100%;max-width:560px;border-radius:20px;margin:30px auto;box-shadow:0 15px 35px rgba(0,0,0,.2);display:none}
        .final-dl-btn{display:inline-block;background:#48bb78;color:white;padding:18px 60px;border-radius:50px;text-decoration:none;font-size:1.5rem;font-weight:700;margin-top:20px;box-shadow:0 12px 30px rgba(72,187,120,.4);transition:.3s}
        .final-dl-btn:hover{background:#38a169;transform:translateY(-3px)}
        #result{display:none}
        #result.show{display:block}
    </style>
</head>
<body>
    <div class="bg-icons">
        <div class="float-icon">Video</div><div class="float-icon">Music</div><div class="float-icon">Like</div>
        <div class="float-icon">Camera</div><div class="float-icon">Down Arrow</div><div class="float-icon">Film</div><div class="float-icon">Star</div>
    </div>

    <div class="container">
        <h1>DIVAS</h1>
        <p class="by">Download <span>Videos</span> Instantly</p>
        <div class="big-banner">TikTok • Facebook • Instagram • YouTube</div>

        <div class="download-card">
            <div class="input-group">
                <input type="text" id="urlInput" class="url-input" placeholder="Paste any video link here..." autocomplete="off">
                <div id="platform-icon"></div>
            </div>
            <button id="downloadBtn">Download Now</button>
            <div id="statusMsg" class="status-msg"></div>
        </div>

        <div id="result">
            <video id="preview" controls></video>
            <div style="text-align:center">
                <a id="downloadLink" class="final-dl-btn" download>Save Video</a>
            </div>
        </div>
    </div>

    <script>
        // BEST WORKING APIs – 29 November 2025
        const APIS = {
            tiktok:    [{ url: "https://tikwm.com/api/?url=", name: "TikWM" }],
            facebook:  [
                { url: "https://betadash-api-swordslush-production.up.railway.app/api/fbdl?url=", name: "BetaDash" },
                { url: "https://api.tiklydown.eu.org/api/download?url=", name: "Tiklydown" }
            ],
            instagram: [
                { url: "https://betadash-api-swordslush-production.up.railway.app/api/insta?url=", name: "BetaDash" },
                { url: "https://api.tiklydown.eu.org/api/download?url=", name: "Tiklydown" }
            ],
            youtube:   [{ url: "https://api.cobalt.tools/api/json", name: "Cobalt", body: url => ({url}) }]
        };

        const ICONS = {
            tiktok: "TikTok",
            facebook: "Facebook",
            instagram: "Instagram",
            youtube: "YouTube"
        };

        const iconEl = document.getElementById("platform-icon");

        // Auto detect platform when user pastes link
        document.getElementById("urlInput").addEventListener("input", function() {
            const url = this.value.trim();
            iconEl.style.opacity = "0";

            if (/tiktok\.com|vt\.tiktok/.test(url)) {
                iconEl.textContent = "TikTok"; iconEl.style.opacity = "1";
            } else if (/facebook\.com|fb\.watch|fb\.com/.test(url)) {
                iconEl.textContent = "Facebook"; iconEl.style.opacity = "1";
            } else if (/instagram\.com/.test(url)) {
                iconEl.textContent = "Instagram"; iconEl.style.opacity = "1";
            } else if (/youtube\.com|youtu\.be/.test(url)) {
                iconEl.textContent = "YouTube"; iconEl.style.opacity = "1";
            }
        });

        function showStatus(msg, type = "loading") {
            const el = document.getElementById("statusMsg");
            el.className = "status-msg show " + type;
            el.innerHTML = type === "loading" ? `<span class="spinner"></span> ${msg}` :
                          type === "success" ? `Success ${msg}` : `Error ${msg}`;
        }

        function extractVideo(data) {
            if (data.hd) return data.hd;
            if (data.sd) return data.sd;
            if (data.video) return data.video;
            if (data.data?.play) return data.data.play;
            if (data.data?.hdplay) return data.data.hdplay;
            if (data.url) return data.url;
            if (data.videoUrl) return data.videoUrl;
            return null;
        }

        async function downloadVideo(url) {
            const result = document.getElementById("result");
            const preview = document.getElementById("preview");
            const link = document.getElementById("downloadLink");
            result.classList.remove("show");

            let platform = null;
            if (/tiktok\.com|vt\.tiktok/.test(url)) platform = "tiktok";
            else if (/facebook\.com|fb\.watch/.test(url)) platform = "facebook";
            else if (/instagram\.com/.test(url)) platform = "instagram";
            else if (/youtube\.com|youtu\.be/.test(url)) platform = "youtube";
            else { showStatus("Unsupported link", "error"); return; }

            showStatus(`Detected: ${ICONS[platform]} • Fetching video...`, "loading");

            let videoUrl = null;

            for (let api of APIS[platform]) {
                try {
                    let res, json;
                    if (api.body) {
                        // Cobalt API for YouTube
                        res = await fetch(api.url, {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify(api.body(url))
                        });
                    } else {
                        res = await fetch(api.url + encodeURIComponent(url));
                    }

                    if (!res.ok) continue;
                    json = await res.json();

                    videoUrl = extractVideo(json);
                    if (videoUrl) {
                        preview.src = videoUrl;
                        preview.style.display = "block";
                        link.href = videoUrl;
                        link.download = `DIVAS_${platform}_${Date.now()}.mp4`;
                        result.classList.add("show");
                        showStatus(`Success ${ICONS[platform]} video ready!`, "success");
                        result.scrollIntoView({behavior:"smooth"});
                        return;
                    }
                } catch (e) {}
            }

            showStatus("Failed — try again in a few seconds", "error");
        }

        // Click button OR press Enter
        document.getElementById("downloadBtn").onclick = () => {
            const url = document.getElementById("urlInput").value.trim();
            if (url) downloadVideo(url);
        };

        document.getElementById("urlInput").addEventListener("keypress", e => {
            if (e.key === "Enter") document.getElementById("downloadBtn").click();
        });
    </script>
</body>
</html>