<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIVAS - Multi-Platform Downloader</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e0eafc 100%);
            min-height: 100vh;
            padding: 30px 15px;
            position: relative;
            overflow-x: hidden;
        }

        .bg-icons {
            position: fixed;
            inset: 0;
            pointer-events: none;
            opacity: 0.07;
            z-index: 0;
        }

        .float-icon {
            position: absolute;
            animation: float 18s infinite linear;
            width: 80px;
            font-size: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .float-icon:nth-child(1) { top: 10%; left: 8%; animation-delay: 0s; }
        .float-icon:nth-child(2) { top: 20%; right: 10%; animation-delay: 4s; }
        .float-icon:nth-child(3) { bottom: 15%; left: 5%; animation-delay: 8s; }
        .float-icon:nth-child(4) { bottom: 25%; right: 15%; animation-delay: 12s; }
        .float-icon:nth-child(5) { top: 60%; left: 20%; animation-delay: 2s; }
        .float-icon:nth-child(6) { top: 45%; right: 5%; animation-delay: 10s; }
        .float-icon:nth-child(7) { top: 75%; left: 12%; animation-delay: 6s; }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }

        .container {
            max-width: 620px;
            margin: 0 auto;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        header h1 { font-size: 1.75rem; color: #2d3748; font-weight: 600; line-height: 1.3; }
        .by { font-size: 1.5rem; color: #4a5568; margin: 10px 0 35px; }
        .by span { color: #e53e3e; font-weight: 700; }

        .platforms { display: flex; justify-content: center; flex-wrap: wrap; gap: 16px; margin: 40px 0; }
        .badge { padding: 14px 32px; border-radius: 50px; font-weight: 700; font-size: 1.15rem; border: 3px solid; min-width: 120px; transition: all 0.3s; }
        .badge:hover { transform: translateY(-3px); }
        .yt { color: #ff0000; border-color: #ff0000; }
        .tt { color: #00f2ea; border-color: #00f2ea; }
        .fb { color: #1877f2; border-color: #1877f2; }
        .ig { color: #e1306c; border-color: #e1306c; }

        .download-card { background: white; padding: 25px; border-radius: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.12); margin: 50px 0; }

        .url-input {
            width: 100%; padding: 18px 25px; border: 2px solid #e0e0e0; border-radius: 25px;
            font-size: 1.1rem; font-family: 'Poppins', sans-serif; margin-bottom: 15px;
            transition: all 0.3s;
        }
        .url-input:focus { outline: none; border-color: #e53e3e; box-shadow: 0 0 0 3px rgba(229,62,62,0.1); }
        .url-input::placeholder { color: #a0aec0; }

        #downloadBtn {
            background: #e53e3e; color: white; border: none; width: 100%; padding: 24px;
            border-radius: 25px; font-size: 1.8rem; font-weight: 700; cursor: pointer;
            box-shadow: 0 12px 25px rgba(229,62,62,0.4); transition: all 0.3s;
        }
        #downloadBtn:hover { background: #c53030; transform: translateY(-4px); }
        #downloadBtn:disabled { opacity: 0.6; cursor: not-allowed; }

        .status-msg { padding: 15px; border-radius: 10px; margin: 15px 0; font-weight: 600; display: none; align-items: center; gap: 10px; }
        .status-msg.show { display: flex; }
        .status-msg.loading { background: #e3f2fd; color: #1976d2; }
        .status-msg.success { background: #e8f5e9; color: #388e3c; }
        .status-msg.error { background: #ffebee; color: #c62828; }

        .spinner {
            display: inline-block; width: 20px; height: 20px;
            border: 3px solid rgba(25,118,210,0.3); border-top-color: #1976d2;
            border-radius: 50%; animation: spin 0.8s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        .big-banner { background: #1e4d3a; color: white; padding: 18px; border-radius: 25px; font-size: 1.3rem; font-weight: 700; margin: 60px 0 25px; box-shadow: 0 15px 30px rgba(30,77,58,0.35); }
        .supported { font-size: 1.4rem; color: #718096; margin: 30px 0 40px; font-weight: 500; }

        .footer-links { display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; margin: 40px 0; font-size: 1.2rem; font-weight: 600; }
        .footer-links a { color: #2d3748; text-decoration: none; }
        .footer-links a:hover { color: #e53e3e; }
        .copyright { color: #a0aec0; font-size: 0.95rem; margin-top: 50px; }

        #preview { width: 100%; max-width: 560px; border-radius: 20px; margin: 30px auto; box-shadow: 0 15px 35px rgba(0,0,0,0.2); display: none; }
        .final-dl-btn { display: inline-block; background: #48bb78; color: white; padding: 18px 60px; border-radius: 50px; text-decoration: none; font-size: 1.5rem; font-weight: 700; margin-top: 20px; box-shadow: 0 12px 30px rgba(72,187,120,0.4); transition: all 0.3s; }
        .final-dl-btn:hover { transform: translateY(-3px); background: #38a169; }

        #result { display: none; }
        #result.show { display: block; }

        @media (max-width: 480px) {
            header h1 { font-size: 1.5rem; }
            .badge { padding: 12px 24px; font-size: 1rem; }
            #downloadBtn { font-size: 1.6rem; }
            .big-banner { font-size: 1.1rem; }
        }
    </style>
</head>
<body>
    <div class="bg-icons">
        <div class="float-icon">Video</div>
        <div class="float-icon">Music</div>
        <div class="float-icon">Like</div>
        <div class="float-icon">Camera</div>
        <div class="float-icon">Down Arrow</div>
        <div class="float-icon">Film</div>
        <div class="float-icon">Star</div>
    </div>

    <div class="container">
        <header>
            <h1>DIVAS</h1>
            <p class="by">Download <span>Videos</span> Instantly</p>
        </header>

        <div class="big-banner">
            Multi-Platform Video & Photo Downloader
        </div>

        <div class="platforms">
            <div class="badge yt">YouTube</div>
            <div class="badge tt">TikTok</div>
            <div class="badge fb">Facebook</div>
            <div class="badge ig">Instagram</div>
        </div>

        <p class="supported">from YouTube, TikTok, Facebook & Instagram</p>

        <div class="download-card">
            <input type="text" id="urlInput" class="url-input" placeholder="Paste link here..." />
            <button id="downloadBtn">Download Now</button>
            <div id="statusMsg" class="status-msg"></div>
        </div>

        <div id="result">
            <video id="preview" controls></video>
            <div style="text-align: center;">
                <a id="downloadLink" class="final-dl-btn" download>Save Video</a>
            </div>
        </div>

        <div class="footer-links">
            <a href="#">How to Use</a>
            <a href="#">FAQ</a>
            <a href="#">Support</a>
        </div>

        <p class="copyright">
            Â© 2025 DIVAS | All downloads are for personal use only
        </p>
    </div>

    <script>
        // UPDATED APIs - November 2025
        const APIS = {
            tiktok: [
                { url: "https://tikwm.com/api/?url=", name: "TikWM" } // Very stable & fast
            ],
            facebook: [
                // NEW PRIMARY & WORKING API (Nov 2025)
                { url: "https://betadash-api-swordslush-production.up.railway.app/fbdl?url=", name: "BetaDash (2025)" },
                // Fallback (kept just in case)
                { url: "https://api.douyin.wtf/api/v1/facebook?url=", name: "DouYin Fallback" }
            ],
            youtube: [
                { url: "https://betadash-api-swordslush-production.up.railway.app/twitch-dl?url=", name: "BetaDash" },
                { url: "https://api.douyin.wtf/api/v1/youtube?url=", name: "DouYin" }
            ],
            instagram: [
                { url: "https://betadash-api-swordslush-production.up.railway.app/instadl?url=", name: "BetaDash" },
                { url: "https://api.douyin.wtf/api/v1/instagram?url=", name: "DouYin" }
            ]
        };

        function showStatus(message, type = "loading") {
            const status = document.getElementById("statusMsg");
            status.className = "status-msg show " + type;
            if (type === "loading") {
                status.innerHTML = '<span class="spinner"></span> ' + message;
            } else if (type === "success") {
                status.innerHTML = 'Success ' + message;
            } else {
                status.innerHTML = 'Error ' + message;
            }
        }

        function extractVideoUrl(data) {
            if (!data) return null;
            if (typeof data === "string" && (data.startsWith("http") || data.startsWith("data:"))) return data;

            const fields = ["video_url","hdplay","play","url","download","video","src","download_url","playUrl","hd_url","videoUrl","data"];
            for (let f of fields) {
                if (data[f] && typeof data[f] === "string" && data[f].startsWith("http")) return data[f];
            }

            if (data.data && data.data.play) return data.data.play;
            if (data.result && data.result.video) return data.result.video;

            // For BetaDash Facebook response
            if (data.hd) return data.hd;
            if (data.sd) return data.sd;

            return null;
        }

        async function downloadVideo(url) {
            const result = document.getElementById("result");
            const preview = document.getElementById("preview");
            const dlLink = document.getElementById("downloadLink");
            result.classList.remove("show");

            let platform = null;
            if (url.match(/tiktok\.com|vt\.tiktok/)) platform = "tiktok";
            else if (url.match(/facebook\.com|fb\.watch/)) platform = "facebook";
            else if (url.match(/youtube\.com|youtu\.be/)) platform = "youtube";
            else if (url.match(/instagram\.com/)) platform = "instagram";
            else { showStatus("Only YouTube, TikTok, Facebook & Instagram supported", "error"); return; }

            const apis = APIS[platform];
            let videoUrl = null;

            for (let api of apis) {
                try {
                    showStatus(`Trying ${api.name}...`, "loading");
                    const fullUrl = api.url + encodeURIComponent(url);

                    const res = await Promise.race([
                        fetch(fullUrl),
                        new Promise((_, rej) => setTimeout(() => rej(new Error("Timeout")), 15000))
                    ]);

                    if (!res.ok) throw new Error("HTTP " + res.status);
                    const data = await res.json();

                    videoUrl = extractVideoUrl(data);
                    if (videoUrl) break;
                } catch (e) {
                    console.log(api.name + " failed:", e.message);
                }
            }

            if (!videoUrl) {
                showStatus("Could not extract video. Try another link.", "error");
                return;
            }

            preview.src = videoUrl;
            preview.style.display = "block";
            dlLink.href = videoUrl;
            dlLink.download = `DIVAS_${platform}_${Date.now()}.mp4`;
            result.classList.add("show");
            showStatus("Video ready to download!", "success");

            setTimeout(() => result.scrollIntoView({behavior: "smooth"}), 100);
        }

        document.getElementById("downloadBtn").addEventListener("click", async () => {
            const url = document.getElementById("urlInput").value.trim();
            if (!url) return showStatus("Paste a video link first", "error");

            document.getElementById("downloadBtn").disabled = true;
            await downloadVideo(url);
            document.getElementById("downloadBtn").disabled = false;
        });

        document.getElementById("urlInput").addEventListener("keypress", e => {
            if (e.key === "Enter") document.getElementById("downloadBtn").click();
        });
    </script>
</body>
</html>